# InterChat

**Интеграционный бот на Go для двусторонней пересылки сообщений между Discord и Telegram.**

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

---

## Содержание

- [Описание](#описание)
- [Установка](#установка)
- [Конфигурация](#конфигурация)
- [Использование](#использование)
- [Команды](#команды)
- [Разработка](#разработка)
- [Лицензия](#лицензия)

---

## Описание

`InterChat` — это лёгкий бот на Go, который:

- **Пересылает** сообщения из указанного канала Discord в группу или канал Telegram.
- **Пересылает** сообщения из указанной группы/чата Telegram в канал Discord.
- **Динамически** настраивает целевые каналы через команды `/syn` и `/ack`.

Данный проект находится в репозитории: https://github.com/alankaupervud/InterChat

---

## Установка

```bash
# Клонируем репозиторий
git clone https://github.com/alankaupervud/InterChat.git
cd InterChat

# Загружаем зависимости
go mod tidy
```

---

## Конфигурация

### 1. .env (статичные переменные)

Создайте файл `.env` в корне проекта с содержимым:

```dotenv
DISCORD_TOKEN=ваш_токен_дискорд_бота
TELEGRAM_TOKEN=ваш_токен_телеграм_бота
```

### 2. config.json (динамические ID)

При первом запуске рядом с `main.go` создаётся файл `config.json`:

```json
{
  "discord_channel_id": "",
  "telegram_chat_id": 0
}
```

Эти поля автоматически заполняются командами:

- В Discord: `/syn` — сохраняет текущий `discord_channel_id`.
- В Telegram: `/ack` — сохраняет текущий `telegram_chat_id`.

---

## Использование

```bash
go run main.go
```

1. В Discord: перейдите в нужный канал и введите:
   ```
   /syn
   ```
2. В Telegram: в группе/чате с ботом введите:
   ```
   /ack
   ```
3. После регистрации обоих ID бот начнёт пересылать сообщения в обе стороны.

> **Важно**:
> - В Discord Developer Portal включите **Message Content Intent** (Bot → Privileged Gateway Intents).
> - В BotFather отключите **Privacy Mode** через `/setprivacy` → выберите бота → **Disable**.

---

## Команды

| Платформа | Команда | Описание                             |
|-----------|---------|--------------------------------------|
| Discord   | `/syn`  | Сохранить текущий канал в `config.json` |
| Telegram  | `/ack`  | Сохранить текущий чат в `config.json`    |

---

## Разработка

- Форматирование кода:
  ```bash
  go fmt ./...
  ```
- Линтинг и проверки:
  ```bash
  go vet ./...
  ```

---

## Лицензия

Проект выпущен под лицензией MIT.  
См. файл [LICENSE](LICENSE).

